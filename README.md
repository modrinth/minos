# Minos
Modrinth authentication backend using Ory Kratos

Includes:
- a small Actix server that demos an authentication in a `/demo` endpoint (Minos)
- a Nuxt example that goes through the Ory login flow with customizable UI
	- (There is a version for using Ory accounts, and a not-quite-finished version for hosting the Ory framework ourselves) 

You can view the Actix readme [here](minos/README.md), and the Nuxt readme [here](nuxt-3-example/README.md).

# Setup

You can view the Actix setup [here](minos/README.md), and the Nuxt setup [here](nuxt-3-example/README.md).

The Minos instance does not need to be running to go through the Nuxt flow. However, the Nuxt index page does attempt to make a call to the Minos API `/demo` endpoint to test if it is authenticated. If you are logged in (with a valid ory Session) and Minos is running, the call will be successful and a JSON representing the Session will be displayed on the Nuxt index page.

# Documentation

The skeleton here uses the @ory sdk. This let's us use the Ory endpoints a little more conviently than just straight calling them.
- API can be found [here for TS](https://github.com/ory/sdk/tree/master/clients/client/typescript) and [here for Rust](https://github.com/ory/sdk/blob/master/clients/client/rust/docs/FrontendApi.md#update_settings_flow)/
- Both of these (and the sdk themselves) are autogenerated. I found the rust doc a lot more helpful to me even when doing the Vue demo- because its autogenerated the function names were the same if I just converted snake_case to camelCase.

- [Integration to custom UI](https://www.ory.sh/docs/kratos/bring-your-own-ui/custom-ui-basic-integration)

- [Quickstart with self-hosting](https://www.ory.sh/docs/kratos/quickstart)

- [Ory Console](https://console.ory.sh/) (for managing an existing Ory project hosted on Ory)

# Notes

- The recovery flow is incomplete for the Ory-hosted version, as there is currently no setup SMTP response server there. (There is a dummy SMTP server on the selfhosted verision)

- The self-hosted version with our UI does not quite work yet, even when all addresses are 127.0.0.1. It can be started but gives CORS errors (I suspect because ports are different and because our UI is not on docker-compose intranet with the other services).